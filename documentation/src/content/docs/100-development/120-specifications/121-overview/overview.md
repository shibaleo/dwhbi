---
title: システム概要
description: DWH+BI システムの全体像と基本方針
---

# システム概要

## システム全体図

```
┌─────────────────────────────────────────────────────────────────────┐
│                        External APIs                                 │
│  ┌────────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐  │
│  │Toggl   │ │Google│ │ Zaim │ │Fitbit│ │Tanita│ │Trello│ │TickT │  │
│  │Track   │ │ Cal. │ │      │ │      │ │Health│ │      │ │ick   │  │
│  └──┬─────┘ └──┬───┘ └──┬───┘ └──┬───┘ └──┬───┘ └──┬───┘ └──┬───┘  │
└─────┼──────────┼────────┼────────┼────────┼────────┼────────┼──────┘
      └──────────┴────────┴────────┼────────┴────────┴────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                    Python Pipelines (GitHub Actions)                 │
│                    pipelines/services/*.py                           │
└─────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         Supabase (PostgreSQL)                        │
│  ┌────────────────────────────────────────────────────────────────┐ │
│  │  raw.*         → 生データ（テーブル）                          │ │
│  │  staging.*     → クリーニング（ビュー）                        │ │
│  │  core.*        → サービス統合（ビュー）                        │ │
│  │  marts.*       → 分析集計（ビュー）                            │ │
│  └────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         管理画面：Admin Console (Next.js)            │
│            + 可視化ダッシュボード：Grafana Cloud (将来)               │
└─────────────────────────────────────────────────────────────────────┘
```

## 設計思想

| 原則 | 説明 |
|------|------|
| **長期運用** | PostgreSQL + Python + dbt は枯れた技術スタック |
| **テンプレート提供** | ユーザーが全リソースを所有し、提供者への依存なく運用可能 |
| **サービス非依存** | core層以降ではサービス名が消え、将来の移行に耐える |

### ドキュメント方針（長期運用のために）

フレームワーク（VitePress, Jekyll等）は廃れる可能性があるが、**Markdownファイル自体は永続する**。
そのため、コンテンツとテンプレートを分離し、コンテンツには独自記法を混ぜない。

```
┌─────────────────────────────────────────┐
│  コンテンツ（*.md）= 純粋なMarkdownのみ │  ← 絶対に汚さない
├─────────────────────────────────────────┤
│  テンプレート/設定 = フレームワーク依存OK │  ← 消えても再構築可能
└─────────────────────────────────────────┘
```

## 対象データドメイン

| ドメイン | 対応済み | 将来対応候補 |
|---------|---------|-------------|
| 時間管理 | Toggl Track | Clockify |
| 予定管理 | Google Calendar | - |
| 健康管理 | Fitbit, Tanita Health Planet | Garmin Connect, Strava |
| 家計管理 | Zaim | PocketSmith |
| プロジェクト管理 | Trello | ClickUp, GitHub (Gist), GitLab, Asana, Monday.com, Wrike, Zendesk |
| タスク管理 | TickTick | Todoist, Microsoft To Do, Google Tasks |
| 習慣管理 | - | Habitica, Habitify |
| マスタ管理 | Airtable | Notion, Coda, Joplin |

## 最小構成

| サービス | 役割 | 無料枠 |
|---------|------|--------|
| **GitHub** | コード、Actions（同期ジョブ） | 2000分/月 |
| **Supabase** | PostgreSQL、認証情報保存 | 500MB |

## 技術スタック

| コンポーネント | 技術 |
|--------------|------|
| データパイプライン | Python |
| データベース | Supabase (PostgreSQL) |
| 管理画面 | Next.js (App Router) |
| ホスティング | Vercel |
| ジョブ実行 | GitHub Actions |
| 認証情報保存 | Supabase Vault |
