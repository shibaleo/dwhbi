version: 2

seeds:
  # =============================================================================
  # Master Tables (Service Independent)
  # =============================================================================
  - name: mst_time_social_categories
    description: "時間social分類のマスタ（対外的・共有可能な分類）"
    config:
      column_types:
        name: text
        name_ja: text
        description: text
        sort_order: integer
    columns:
      - name: name
        description: "PK, カテゴリ名（VITALS, WORK等）"
        data_tests:
          - unique
          - not_null
      - name: name_ja
        description: "日本語名"
      - name: description
        description: "説明（英語）"
      - name: sort_order
        description: "表示順"

  - name: mst_time_personal_categories
    description: "時間personal分類のマスタ（内省的・個人的分類）"
    config:
      column_types:
        name: text
        name_ja: text
        description: text
        sort_order: integer
        is_day_type_eligible: boolean
    columns:
      - name: name
        description: "PK, カテゴリ名（Sleep, Work等）"
        data_tests:
          - unique
          - not_null
      - name: name_ja
        description: "日本語名"
      - name: description
        description: "説明（英語）"
      - name: sort_order
        description: "表示順"
      - name: is_day_type_eligible
        description: "day_type導出に使用するカテゴリかどうか"

  # =============================================================================
  # Mapping Tables (Service Dependent)
  # =============================================================================
  - name: map_toggl_client_to_time_social
    description: "Toggl clientから時間socialへのマッピング"
    config:
      column_types:
        toggl_client_name: text
        time_category_social: text
    columns:
      - name: toggl_client_name
        description: "PK, Toggl client名"
        data_tests:
          - unique
          - not_null
      - name: time_category_social
        description: "FK → mst_time_social_categories.name"
        data_tests:
          - not_null
          - relationships:
              to: ref('mst_time_social_categories')
              field: name

  - name: map_toggl_color_to_time_personal
    description: "Toggl色から時間personalへのマッピング（API色情報を統合）"
    config:
      column_types:
        toggl_color_hex: text
        toggl_color_name: text
        time_category_personal: text
    columns:
      - name: toggl_color_hex
        description: "PK, Toggl色HEX（#0b83d9等）"
        data_tests:
          - unique
          - not_null
      - name: toggl_color_name
        description: "Toggl色名（Blue等）"
      - name: time_category_personal
        description: "FK → mst_time_personal_categories.name"
        data_tests:
          - not_null
          - relationships:
              to: ref('mst_time_personal_categories')
              field: name

  - name: map_gcal_desc_to_time_social
    description: "Calendar descriptionから時間socialへのマッピング"
    config:
      column_types:
        gcal_description_first_line: text
        time_category_social: text
    columns:
      - name: gcal_description_first_line
        description: "PK, description 1行目"
        data_tests:
          - unique
          - not_null
      - name: time_category_social
        description: "FK → mst_time_social_categories.name"
        data_tests:
          - not_null
          - relationships:
              to: ref('mst_time_social_categories')
              field: name

  - name: map_gcal_color_to_time_personal
    description: "Calendar色から時間personalへのマッピング（API色情報を統合）"
    config:
      column_types:
        gcal_color_id: text
        gcal_color_name: text
        gcal_color_hex: text
        time_category_personal: text
    columns:
      - name: gcal_color_id
        description: "PK, Calendar API色ID（1〜11）"
        data_tests:
          - unique
          - not_null
      - name: gcal_color_name
        description: "色名（Lavender等）"
      - name: gcal_color_hex
        description: "HEX値（参考用）"
      - name: time_category_personal
        description: "FK → mst_time_personal_categories.name"
        data_tests:
          - not_null
          - relationships:
              to: ref('mst_time_personal_categories')
              field: name
